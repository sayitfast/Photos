@model ParentProfileViewModel


<div class="flex-container" id="user-profile">
	<div class="flex-item" id="profile-picture-area">
		@if (Model.User.ProfilePicture == null)
		{
			<img src="~/images/no-profile-image.jpg" class="profile-picture" />
		}
		else
		{
			<img src="~/uploads/@Model.User.Id/@Model.User.ProfilePicture" class="profile-picture" style="border-radius: 25px;" />
		}
	</div>
	<div class="flex-item" id="user-information">
		<div class="row text-center">
			@if (Model.User.FirstName == null)
			{
				<h2>@Model.User.Email</h2>
			}
			else
			{
				<h2>@Model.User.FirstName</h2>
			}
		</div>
		<hr />
		<div class="row text-center">
			@if (Model.User.Description != null)
			{
				<div class="row text-center" id="description-area">
					<p>@Model.User.Description</p>
				</div>
			}
		</div>
		<hr />
		<div class="row" id="flex-item-inner">
			<ul id="albums-info">
				@if (Model.Albums.Count > 1)
				{
					<li><strong>@Model.Albums.Count</strong> albums</li>
				}
				else
				{
					<li><strong>@Model.Albums.Count</strong> album</li>
				}
				<li><strong>@Model.Images.Count</strong> photos</li>
				<li>(totalLikes) likes</li>
			</ul>
		</div>
		<hr />
		@if (Model.User.Location != null && Model.User.Age > 0 &&
																Model.User.Email != null)
		{
			<div class="row" id="flex-item-inner">
				<ul id="person-info">
					<li id="location"><span class="glyphicon glyphicon-home" style="margin-right: 10px;"></span>@Model.User.Location</li>
					<li id="email"><span class="glyphicon glyphicon-envelope" style="margin-right: 10px;"></span>@Model.User.Email</li>
				</ul>
			</div>
			<hr />
		}
		<div class="row" id="flex-item-inner">
			<ul id="profile-buttons">
				<li id="create">@(Html.ActionLink<AlbumsController>("Create Album", c => c.Create()))</li>
				<li id="edit">@(Html.ActionLink<MyProfileController>("Edit Profile", c => c.Edit()))</li>
			</ul>
		</div>
	</div>
</div>

<br />
<hr />

@if (Model.Albums == null || !Model.Albums.Any())
{
	// if the user have not uploaded any album
	<div class="col-md-6 col-md-offset-3 text-center">
		<h1>You don't have any albums.</h1>
	</div>
}
else
{
	foreach (var album in Model.Albums)
	{
		//Taking the pictures that have as albumId the current album of the loop
		var images = Model.Images.Where(img => img.Album == album).ToList();

		<div class="col-md-4 text-center">

			@if (images.Capacity == 0)
			{
				//if the album does not have any pictures in it
				<img src="~/images/album_with_no_images.jpg" />
			}

			// Displaying the albums with there pictures
			// using carousel to make the pictures slide 
			// one after another
			else
			{
				var firstImage = images.First();

				<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="4000" data-delay="3000">
					
					<div class="carousel-inner" role="listbox">
						@foreach (var image in images)
						{
							// if the picture is the first in the images list
							// the class will be "item active"
							if (image == firstImage)
							{
								<div class="item active">
									<img src="uploads/@Model.User.Id/@album.Id/@image.Name" alt="Chania" style="height: 300px;">
								</div>
							}
							else
							{
								<div class="item">
									<img src="uploads/@Model.User.Id/@album.Id/@image.Name" alt="Chania" style="height: 300px;">
								</div>
							}
						}
					</div>
				</div>
			}
			@(Html.ActionLink<AlbumsController>(album.Name, c => c.Details(album.Id, Model.User.Id)))
			<br />
			<label>by @Model.User.FirstName @Model.User.LastName</label>
			<hr />
		</div>
	}
}
<div class="clearfix"></div>
