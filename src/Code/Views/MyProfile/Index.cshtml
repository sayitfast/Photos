@model Code.Models.ProfileViewModels.MyProfileViewModel


<div class="row u_profile">

	<div class="col-md-3 u_info text-center">
		@if (Model.ProfilePictureName != null)
		{
			<img src="~/uploads/@Model.Id/@Model.ProfilePictureName" class="u_profile_img" />
		}
		else
		{
			<img src="~/uploads/@Model.Id/@Model.ProfilePictureName" class="u_profile_img" />
		}
		<h3>@Model.FirstName @Model.LastName</h3>
		@{ var totalImages = 0;}
		@foreach (var album in Model.MyAlbums)
		{
			totalImages += album.AlbumImages.Count();
		}
		<ul class="u_activity_info">
			<li><strong>@Model.MyAlbums.Count</strong> albums</li>
			<li><strong>@totalImages</strong> images</li>
			<li><strong>@Model.CommentsCount</strong> comments</li>
			<li><strong>@Model.LikesCount</strong> likes</li>
		</ul>
		<p>@Model.Location</p>
		@if (Model.Description != null)
		{
			<p>@Model.Description</p>
		}
		<ul class="u_actionlinks">
			<li>
				<a href="@(Url.Action("Upload", "Image"))" class="btn btn-primary" title="Upload photo">
					<span class="glyphicon glyphicon-picture"></span>
				</a>
			</li>
			<li>
				<a href="@(Url.Action("Create", "Albums"))" class="btn btn-primary" title="Create new album">
					<span class="glyphicon glyphicon-folder-open"></span>
				</a>
			</li>
			<li>
				<a href="@(Url.Action("Edit", "MyProfile"))" class="btn btn-default" title="Edit Profile">
					<span class="glyphicon glyphicon-cog"></span>
				</a>
			</li>
			<li class="signout">
				<form asp-area="" asp-controller="Account" asp-action="LogOff" method="post">
					<button type="submit" class="btn btn-danger" title="Sign out">
						<span class="glyphicon glyphicon-log-out"></span>
					</button>
				</form>
			</li>
		</ul>
	</div>

	<div class="col-md-9 col-md-offset-0 u_uploads">

		@if (Model.MyAlbums.Capacity > 0)
		{
			@foreach (var album in Model.MyAlbums)
			{
				<div class="col-md-5 col-md-offset-1 u_album">

					<h3 class="text-center">@album.Name</h3>

					@if (album.AlbumImages.Capacity > 0)
					{
						<div id="album-with-pictures" class="carousel slide" data-ride="carousel" data-interval="4000" data-delay="3000">

							<div class="carousel-inner" role="listbox">

								@foreach (var image in album.AlbumImages)
								{
									var firstImage = album.AlbumImages.First();

									if (image == firstImage)
									{
										<div class="item active">
											<img src="@image.Path" alt="Chania" style="height: 300px;">
										</div>
									}
									else
									{
										<div class="item">
											<img src="@image.Path" alt="Chania" style="height: 300px;">
										</div>
									}
								}
							</div>
						</div>
					}
					else
					{
						<img src="~/images/album_with_no_images.jpg" />
					}

					<div class="a_details_link">
						<a href="@(Url.Action("Details", "Albums", new { @albumId = album.Id, @userId = Model.Id }))" title="View" class="pull-right">
							<span class="glyphicon glyphicon-option-horizontal"></span>
						</a>
					</div>
				</div>
			}
		}
	</div>

	@if (Model.MyAlbums.Capacity > 0)
	{
		<div class="row text-center" style="margin-top: 10px;">
			<div class="col-md-9 col-md-offset-3 text-center" style="margin-top: 10px;">
				@if (ViewBag.CurrentAlbumsPage > 1)
				{
					<a href="/MyProfile/Index?albumsPage=@(ViewBag.CurrentAlbumsPage - 1)" class="btn btn-default pull-left" style="margin-left: 65px;">
						<span class="glyphicon glyphicon-menu-left"></span>
						Previous
					</a>
				}
				else if (Model.MyAlbums.Count <= 4)
				{
					<a href="/MyProfile/Index?albumsPage=@(ViewBag.CurrentAlbumsPage + 1)" class="btn btn-default pull-right" style="margin-right: 15px;">
						Next
						<span class="glyphicon glyphicon-menu-right"></span>
					</a>

				}
			</div>
		</div>
	}
