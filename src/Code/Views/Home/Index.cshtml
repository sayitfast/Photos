@model ParentAlbumViewModel



@inject UserManager<ApplicationUser> UserManager


@{
	ViewData["Title"] = "Home Page";
}
<img src="http://cdn.wallpapersafari.com/49/2/TibMQf.jpg" class="img_cover" />
<div class="row">
	<div class="col-md-8 col-md-offset-2 text-center">
		<p class="lead">
			<h1 style="color: white;">Welcome to Photos</h1>
			<p style="color: white;" class="lead">
		<strong>Upload</strong>, <strong>comment</strong>, <strong >rate</strong> and <strong >explore</strong> photos and albums from people all over the world!</p>
		</p>
	</div>
</div>
<div class="row">
	<div class="text-center">
		@using (Html.BeginForm<SearchController>(c => c.Index(), FormMethod.Post, new { id = "search-form"}))
		{
			@Html.TextBoxFor(m => m.Search, new { @id = "search-box", @placeholder = "Search by category" })
			<input type="submit" id="search-button" value="Go" />
		}
	</div>
</div>
<div class="row" id="latest-album-title" style="margin-top: 50px;">
	<div class="col-md-4 col-md-offset-4 text-center">
		Latest Albums
	</div>
</div>

<div class="albums">
	@if (Model.List == null || !Model.List.Any())
	{
		<h1>There aren't any albums.</h1>
	}
	else
	{
		
		@foreach (var album in Model.List)
		{
			var albumImages = Model.Images
				.Where(img => img.Album.Id == album.Id)
				.ToList();

			<div class="col-md-4 text-center" id="album">

				<div id="album-details">
					<div class="col-md-8" id="album-name">
						<div>@album.Name</div>
					</div>
				</div>

				@if (albumImages.Count == 0)
				{
					<img src="~/images/album_with_no_images.jpg" />
				}
				else
				{
					var firstImage = albumImages.First();

					<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="4000" data-delay="3000">

						<div class="carousel-inner" role="listbox">

							@foreach (var image in albumImages)
							{
								// if the picture is the first in the images list
								// the class will be "item active"
								if (image == firstImage)
								{
									<div class="item active">
										<img src="~/uploads/@album.Creator.Id/@album.Id/@image.Name" alt="Chania" style="height: 300px; width: inherit">
									</div>
							}
							else
							{
									<div class="item">
										<img src="~/uploads/@album.Creator.Id/@album.Id/@image.Name" alt="Chania" style="height: 300px; width: inherit">
									</div>
							}
						}
						</div>
					</div>
				}
				<div id="album-details">
					@(Html.ActionLink<AlbumsController>("View", c => c.Details(album.Id, album.Creator.Id)))
				</div>
			</div>
				}
		<div class="clearfix"></div>
	}
</div>
